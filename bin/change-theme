#!/usr/bin/env bash
# shellcheck enable=all

background_theme="dark"

# save computer specific themes to .not-public
if [[ -z ${MY_THEME} ]]; then
    MY_THEME="oceanic-next"
fi

if [[ -z ${MY_LIGHT_THEME} ]]; then
    MY_LIGHT_THEME="cupertino"
fi

case $(uname) in
Darwin)
    color_theme=$(defaults read -g AppleInterfaceStyle 2>/dev/null)
    if [[ "${color_theme}" != 'Dark' ]]; then
        background_theme="light"
    fi
    ;;
*) ;;
esac

if command -v theme-sh >/dev/null; then
    if [[ "${background_theme}" = 'light' ]]; then
        theme-sh "${MY_LIGHT_THEME}"
    else
        theme-sh "${MY_THEME}"
    fi
fi

echo "${background_theme}"
